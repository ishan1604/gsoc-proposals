**Browser Based Offline Access**

**Project idea:**

The core idea is providing Browser-based offline access to the Mifos community app. Browser-Based offline access tends to provide offline functionality to the community app making it a progressive web app that can also work on a flaky connection and even offline.

**Current Status of the Project:**

The app currently supports caching of all static assets and API requests. The app allows some level of offline interactivity and has a lot of scope for further enhancements by introducing functionalities such as background sync, push notification, performing general tasks offline and some more. These would also significantly improve the *progressiveness* of the app and consequently increase the lighthouse score.

**Briefly cover what you expect to complete in this project and when.**

1. **Simplifying login into community app**

The Credential Management API of Google shall be integrated with the app. It allows for storage of the valid ID / Password combination of the user and providing frictionless experience during login using the credential information stored in the browser password manager.

    **  2.  Caching all the static assets**

To stay organized, I want to stick different kinds of resources into different caches. This will allow me to manage those caches later. The cache key Strings are arbitrary — we can call your caches whatever you’d like; the cache API doesn’t have opinions. By using Glob/Regex, the paths of the cache contents can be fetched for further tasks and we do not have to hard code each and every file which is to be cached.

gulp.task('generate-service-worker', function(callback) {
    var path = require('path');
    var swPrecache = require('sw-precache');
    var rootDir = 'app';
swPrecache.write(`${rootDir}/service-worker.js`,{ staticFileGlobs:[rootDir+'/**/*.{js,html,css,png,jpg,gif,svg,eot,ttf,woff}'],
    stripPrefix: rootDir
    }, callback);
});

       **3. ****Caching all the API requests to load data offline**

URL patterns can be written using a syntax similar to its routing syntax. To use Express-style URL patterns, we have to pass the pattern into the route as a string. sw-toolbox then converts the URL to a *regular expression* via the path-to-regexp library instead of hardcoding all requests. In addition to handling the origin we customize the cache itself using sw-toolbox. The following code puts all the API request by fonts in a cache called static-vendor-cache-v1.

self.toolbox.router.get('/(.*)', self.toolbox.cacheFirst, {  
    origin: /fonts\.gstatic\.com/,
    cache: {
      name: 'static-vendor-cache-v1',
      maxEntries: *10*
    }
  }
);

       **4. ****Storing data in the browser when there is no internet connection**

For URL addressable resources, the **Cache API** (part of service workers) can be employed. The Cache API can efficiently handle the browser cache for management of the assets while also providing security. For all other data, IndexedDB can be used to fill in the offline page data from it. Data will be stored in indexedDB using **idb** (npm module). Idb is a tiny library that mirrors indexedDB, but replaces the weird IDBRequest objects with promises.

     **  5.  ****Synchronising it accordingly when online**

**Sync** event of service worker can be utilised to sync the data once the   system is online. The event tag name of the JSON will be checked for respective  handling of that data. After the data has been synced, the JSON will be deleted from indexedDB. The next task will be to notify the user when data sync is complete upon reconnection. This will be executed through the UI. The **sync **will fire when the UA believes the user has connectivity. The following code snippet is an example for the process.

self.addEventListener('sync', function(event) {
        if (event.tag == 'outbox') {
            event.waitUntil(sendEverythingInTheOutbox());
        }
      });

The promise passed to waitUntil is a signal to the UA that the sync event is ongoing and that it should keep the SW alive if possible. Rejection of the event signals to the UA that the sync failed. Upon rejection the UA should reschedule (likely with a UA-determined backoff).

**6. ****Able to create client, groups, centers, update transactional data offline and sync it  accordingly**

When the system is offline, the data generated by the app will be transformed to a key-value pair and pushed into the IndexedDB with the help of **idb **module of **npm**. This is a tiny library that mirrors IndexedDB, but replaces the weird IDBRequest objects with promises, plus a couple of other small changes. The following code snippet shows objects key value pair put in the Database.

function createDB() {
idb.open('account', *1*, function(upgradeDB) {
var user = upgradeDB.createObjectStore('client', {
*keyPath*: 'id'
});
user.put({*id*: *123*, *name*: ‘abc', *price*: *10.99*, *quantity*: *200*});
user.put({*id*: *321*, *name*: 'xyz', *price*: *8.99*, *quantity*: *100*});
user.put({*id*: *222*, *name*: 'pqr', *price*: *11.99*, *quantity*: *300*});
 });
 });
}

**7.  Able to inform when user is in offline mode through UI**

The user can be notified when working is online or offline using different color themes and notifications. The user will also be notified of successful caching and that the content can be viewed offline as well. The user shall also be informed of the last time the app was online so as to keep the user aware of the data that has been synced with the database.

**8.  Providing Add to Home screen functionality**

For customizing the "add to homescreen" experience for the app (favicons, application name displayed, orientation and more), a Web Application Manifest (**manifest.json**) will be added to the root directory. With a Web App manifest set up, we can also get access to app installer banners, giving us a way to natively prompt for users to install the PWA if they find themselves engaging with it often. It’s also possible to defer the prompt until a time when a user has a useful interaction with the app. The following code snippet provides an example of a manifest.json file.

{
  "name": "community-app",
  "short_name": "community-app",
  "start_url": ".",
  "display": "standalone",
  "background_color": "#fff",
  "description": "Banking solutions for unbanked.",
  "icons": [{
    "src": "images/touch/homescreen48.png",
    "sizes": "48x48",
    "type": "image/png"
  }, {
    "src": "images/touch/homescreen72.png",
    "sizes": "72x72",
    "type": "image/png"
  }, {
    "src": "images/touch/homescreen96.png",
    "sizes": "96x96",
    "type": "image/png"
  }, {
    "src": "images/touch/homescreen144.png",
    "sizes": "144x144",
    "type": "image/png"
  }, {
    "src": "images/touch/homescreen168.png",
    "sizes": "168x168",
    "type": "image/png"
  }, {
    "src": "images/touch/homescreen192.png",
    "sizes": "192x192",
    "type": "image/png"
  }],
  "related_applications": [{
    "platform": "web"
  }, {
  }]
}

Through the development phase of the features, I will be writing blog posts to document the development idea, implementation and the technical nuances so as to guide a future developer working on the app. Also, if time permits, I shall audit the accessibility of the app to allow easy access to the app to disabled users.

**Timeline**

Of about 12 weeks of the program with 25 days for community bonding, I will devote 60% of it for developing new features, 20% for testing and preparing wiki and 20% for performance tuning. My end-sem University Exams will happen from 13th May to 27th May. I will be devoting few hours daily during then for community bonding.

<table>
  <tr>
    <td>Time frame</td>
    <td>start-date</td>
    <td>end-date</td>
    <td>task</td>
  </tr>
  <tr>
    <td>Community-bonding</td>
    <td>5-may</td>
    <td>30-may</td>
    <td></td>
  </tr>
  <tr>
    <td>




Development Phase 1</td>
    <td>31 may



2 june 


11 june


20 june</td>
    <td>1 june



10 june


19 june


25 june</td>
    <td>Add to home screen functionality on the app by introducing manifest.json

Improve the caching of static assets by using Regex for paths 

Improving caching of Dynamic assets

Integration of Credential Management API with the app</td>
  </tr>
  <tr>
    <td>Blog posts</td>
    <td></td>
    <td></td>
    <td>4 blog post explaining the work done in development phase 1.</td>
  </tr>
  <tr>
    <td>End result</td>
    <td></td>
    <td></td>
    <td>New features of easy login, respective handling of static and dynamic assets, add to home screen functionality and a splash screen for the app are applied to the app</td>
  </tr>
  <tr>
    <td>Evaluation</td>
    <td>26 june</td>
    <td>30 june</td>
    <td></td>
  </tr>
  <tr>
    <td>




Development Phase 2</td>
    <td>27 june



3 july



13 july</td>
    <td>2 july



12 july



23 july</td>
    <td>Storing the API requests and their corresponding data into the browser storage for use when offline

Storing data generated by the app/ entered by the user when offline into the IndexedDB.

Syncing the offline-mode stored data from the browser storage to the server</td>
  </tr>
  <tr>
    <td>Blog posts</td>
    <td></td>
    <td></td>
    <td>3 blog posts explaining work done in development phase 2 </td>
  </tr>
  <tr>
    <td>End result</td>
    <td></td>
    <td></td>
    <td>The web app boasts of offline functioning and supports user interaction when offline</td>
  </tr>
  <tr>
    <td>evaluation</td>
    <td>24 july</td>
    <td>28 july</td>
    <td></td>
  </tr>
  <tr>
    <td>




Development phase 3</td>
    <td>25 july



1 aug

11 aug


19 aug</td>
    <td>31 july



10 aug

18 aug


21 aug</td>
    <td>Checking the progressive score of the app with Lighthouse and making improvements if required

Offline Gui fine-tuning

Improve the overall performance of the webapp

Documentation of all the work done with wiki and FAQs</td>
  </tr>
  <tr>
    <td>Blog posts</td>
    <td></td>
    <td></td>
    <td>3 blog posts explaining work done in development phase 3</td>
  </tr>
  <tr>
    <td>End result</td>
    <td></td>
    <td></td>
    <td>The overall performance of the webapp is improved along with better Lighthouse score. Also all of the work that has been put into this project has been documented.</td>
  </tr>
</table>


   

![image alt text](https://github.com/anu-007/assets/blob/master/image_0.png?raw=true)

       **  Background Sync with service worker**

![image alt text](https://github.com/anu-007/assets/blob/master/image_1.png?raw=true)

** Login with credential management API**

![image alt text](https://github.com/anu-007/assets/blob/master/image_2.png?raw=true)

**Offline UI elements**

![image alt text](https://github.com/anu-007/assets/blob/master/image_3.png?raw=true)

**Notifications showing app is ready for offline usage**

![image alt text](https://github.com/anu-007/assets/blob/master/image_4.png?raw=true)

**Add to home screen (left)**

**Splash screen (right)**

  

**Why are you the right person for this project?**

I am fascinated by web development and the kind of impact you can impart with it. I have actively been involved in the web-development world. I have experience working on several projects based on the same mifos technology stack. I am enthusiastic about open-source and appreciate the gravity of working with developers across the globe. Furthermore, I have prior experience with the service worker API which is the core requirement of the project. ( [https://youtu.be/91uug0GuXhw](https://youtu.be/91uug0GuXhw) )

Also, I participate in the Google Developer Group meetups and I am active in the Freecodecamp community. Such communities are the perfect places to brainstorm for ideas on my project. I will be getting valuable inputs from experienced developers.

**If in college, current area of study:**

I am currently in 3rd year of college and studying Computer Science and Engineering.

**Contact information and preferred method of contact (email, Gitter ID, Skype id, telephone number, time zone):**

Email: 			[anubhutiv1@gmail.com](mailto:anubhutiv1@gmail.com)

Mobile: 			+918750841262

Gitter Handle:		anu-007

Skype:			anubhutiv1

TIme Zone:			GMT +5:30

**Career goals:**

I am very enthusiastic about web tooling and performance and enjoyed working with javascript and it's frameworks and want to become a successful full stack web developer.

**Please share any links to source code you have written or websites you have built.**

Almost all of my work is available on github ( [https://github.com/anu-007](https://github.com/anu-007) )

An app I developed that has service worker implemented can be found at ( [https://movie-mantra.herokuapp.com](https://movie-mantra.herokuapp.com) )

Also developed an app which is basically a social network for artists can be found at ( [https://github.com/anu-007/fllaunt.in](https://github.com/anu-007/fllaunt.in) )

**If you have visited our gitter chat room, what nickname did you use?**

I have visited your gitter chatroom. My gitter nickname: anu-007

**Have you contributed to other open source projects? If so, which?**

I am an active contributor to Fossasia (open event web app). I have participated in Open Code Collab, an open-source contribution event conducted by IIIT Allahabad, India.

**Have you any previous experience with JavaScript/Java/Spring/Hibernate/MySQL?**

I have experience with MySQL , JavaScript and service worker api which i have used in my various projects

**What other commitments do you have this summer? (working on this project is a full-time job and must be your primary commitment!)**

I shall not be having any commitment other than this project for the summer as the timeline will lie and stretch through the summer break of college.I will be able to devote 30-35 hours per week for the project.

**Have you deployed and run the Mifos X Platform (****[https://github.com/openMF/mifos**x](https://github.com/openMF/mifosx)**) and reference User Interface (****[https://github.com/openMF/mifosx-community-app**s](https://github.com/openMF/mifosx-community-apps)**)?**

Yes, I have deployed the Mifos X platform and the community app.

**Have you submitted any patches or source code to Mifos X yet? Please provides links to the commit in GitHub or the JIRA ticket (students looking to be seriously considered should make at least one submission)**

I am active in the Mifos developer community and made several contributions to the code base.

Merged pull requests :      ( [https://goo.gl/wa8OYO](https://goo.gl/wa8OYO) )

Open pull requests     :     ( [https://goo.gl/wDv0gr](https://goo.gl/wDv0gr) )

Issue reported            :      ( [https://goo.gl/dqAcSB](https://goo.gl/dqAcSB) )

**Have you previously participated in the Google Summer of Code?**

No. This is my first time participation in the Google Summer of Code.

**Are you applying to multiple organizations this year?**

Yes. I am applying to one more organisation this year.

**If you answered "yes" to the last question, which is your first choice?**

My first choice will obviously be Mifos as the I think I’ve got what it takes to complete this project and I can do justice to it given my experience with offline features which is the primary focus of the project. And if for some reason I don’t get selected, I will keep on contributing to Mifos and try again the following year.

